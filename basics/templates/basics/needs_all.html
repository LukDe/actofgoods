{% extends 'basics/base.html' %}
{% load filter%}
{% block content %}


<!-- needs -->
<div id="standard-modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="row">
                <div class="col-sm-4" style="padding: 15px">
                    <h2 class="text-center" id="standard-modal-headline">Needs</h2>
                </div>
                <form class="form" role="form" method="post" action="{% url 'basics:needs_all'%}" accept-charset="UTF-8">
                  {%csrf_token%}
                  <div class="col-sm-2" style="margin-top: 20px;">
                    <label> Range
                        <select style="width: 100%" name="range">
                          <option>5km</option>
                          <option>20km</option>
                          <option>40km</option>
                        </select>
                    </label>
                  </div>
                  <div class="col-sm-2" style="margin-top: 20px;">
                    <label> Category
                        <select style="width: 100%" name="category">
                            {% for category in categorie %}
                                <option value="{{ category.name }}">{{ category.name }}</option>
                            {% endfor %}
                        </select>
                    </label>
                  </div>
                  <div  class="col-sm-2" style="margin-top: 20px;">
                    <label> Cards per Page
                        <select style="width: 100%" title="{{cards_per_page}}" name="cards_per_page">
                            <option>1</option>
                            <option>5</option>
                            <option>10</option>
                        </select>
                    </label>
                  </div>
                  <div  class="col-sm-2" style="margin-top: 30px; margin-bottom: 0px;">
                      <input id="standard-grey-button-bold" type="submit" class="btn btn-block btn-lg btn-primary" value="Filter"/>
                  </div>
                </form>
            </div>
        </div>
        <div class="modal-body">
            <div class="list-group">
                {% if needs %}
                    {% for need in needs %}

                        <!-- list all needs -->
                        <a class="list-group-item" id="standard-list-group-item-div">
                            <div class="row">
                                <div class="col-sm-12" data-toggle="modal" data-target=".{{ need.id }}">
                                    <h4 class="list-group-item-heading">{{ need.headline }}</h4>
                                    <p class="list-group-item-text">{{ need|get_short_text:160 }}</p>
                                </div>
                                <div class="col-sm-9" data-toggle="modal" data-target=".{{ need.id }}">
                                    <h6><br>from: {{ need.date }} / category: {{ need.categorie.name }} </h6>
                                </div>
                                <div class="col-sm-1">
                                    <button type="button" id="{{ need.id }}" class="btn btn-default btn-sml standard-grey-button-light " onclick="location.href='{% url 'basics:needs_help' id=need.id %}';" style="float: right; margin-top: 10px;"><span class="glyphicon glyphicon-comment"></span> Help</button>

                                </div>
                                <div class="col-sm-1"></div>
                                {% if not user.userdata in need.reported_by.all %}
                                  <div class="col-sm-1">
                                    <button type="button" id="{{ need.id }}" class="btn btn-default btn-sml standard-grey-button-light " onclick="location.href='{% url 'basics:report_need' pk=need.pk %}';" style="float: right; margin-top: 10px;"><span class="glyphicon glyphicon-alert"></span> Report</button>
                                  </div>
                                {% else %}
                                  <div class="col-sm-1">
                                    <button type="button" class="btn btn-default btn-sml standard-grey-button-light disabled" onclick="#" style="float: right; margin-top: 10px;"><span class="glyphicon glyphicon-alert"></span> Report</button>
                                  </div>
                                {% endif %}
                            </div>
                        </a>

                        <!-- modal for every need -->
                        <div class="modal fade {{ need.id }}"  role="dialog" aria-labelledby="request" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <h2>{{need.headline}}</h2>
                                        <h6>from: {{ need.date }} / category: {{ need.categorie.name }} </h6>
                                    </div>
                                    <div class="modal-body">
                                        <p>{{ need.text|linebreaksbr }}</p>
                                    </div>
                                    <div class="modal-footer">

                                        <button type="button" id="standard-grey-button-bold" class="btn btn-default btn-sml standard-grey-button-light " onclick="location.href='{% url 'basics:needs_help' id=need.id %}';" ><span class="glyphicon glyphicon-comment"></span>Help</button>
                                        {% if not user.userdata in need.reported_by.all %}
                                          <button type="button" id="standard-grey-button-bold" class="btn btn-default btn-sml standard-grey-button-light " onclick="location.href='{% url 'basics:report_need' pk=need.pk %}';"><span class="glyphicon glyphicon-alert"></span> Report</button>
                                        {% else %}
                                          <button type="button" id="standard-grey-button-bold" class="btn btn-default btn-sml standard-grey-button-light disabled" onclick="#"><span class="glyphicon glyphicon-alert"></span> Report</button>
                                        {% endif %}
                                        <button id="standard-grey-button-bold" type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <h4>There are no needs.</h4>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div><!-- end needs -->

<!-- Introduction Row -->
<!--
<div class="row">

  <div class="[ col-xs-12 col-sm-offset-2 col-sm-8 ]">
  <!--<div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Action <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><a href="#">Action</a></li>
      <li><a href="#">Another action</a></li>
      <li><a href="#">Something else here</a></li>
      <li role="separator" class="divider"></li>
      <li><a href="#">Separated link</a></li>
    </ul>

  </div>
  -->
  <!--  <form action="{% url 'basics:needs_all'%}" method="post">
      {%csrf_token%}
      <div class="btn-group">
        <select name="range" class="selectpicker" title="{{range}}">
          <option>5km</option>
          <option>20km</option>
          <option>40km</option>
        </select>
        <select name="category" class="selectpicker" title="{{category}}">
          {%for c in categorie%}
          <option>{{c.name}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="btn-group pull-right">
         <button type="submit" class="btn btn-success">Refresh</button>
      </div>
      <div class="btn-group pull-right">
        <div class="btn-group">
          <select name="cards_per_page" title="{{cards_per_page}}" class="selectpicker">
            <option>1</option>
            <option>5</option>
            <option>10</option>
          </select>
        </div>

      </div>
    </form>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">

    <!-- Latest compiled and minified JavaScript -->
  <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>
    <script>
      $('.selectpicker').selectpicker({
        style: 'btn-info',
        size: 4
      });
    </script>
  </div>
</div>
<br>
<div class="row">
   <div class="[ col-xs-12 col-sm-offset-2 col-sm-8 ]">

     <ul class="event-list">
       {% for need in needs%}

         <li>

            <time datetime="2014-07-20 2000">
  						 <span class="day">{{ need.date.day }}</span>
  						 <span class="month">{{need.date.month}}</span>
  						 <span class="year">2014</span>
  						 <span class="time">04:20 PM</span>
  					 </time>

           <div class="info">
             <h2 class="title"><a  href="{% url 'basics:needs_view' pk=need.pk %}">{{ need.headline }}</a></h2>
             <p class="desc">{{ need.text }}</p>
            <ul>
               <li style="width:20%;">comments (3)</li>
               <li style="width:20%;"><a href="#website"><span class="glyphicon glyphicon-map-marker"></span>Location</a></li>
               <li style="width:20%;"> <span class="glyphicon glyphicon-thumbs-up"></span> Like</li>
               <li style="width:20%;"><a id="help-link" href="{% url 'basics:needs_help' id=need.id %}">Help</a><span class="fa fa-question"></span></li>
               {% if not user.userdata in need.reported_by.all %}
                <li style="width:20%;"><a id="report-need" href="{% url 'basics:report_need' pk=need.pk %}">report</a></li>
                {% endif %}
             </ul>
           </div>

         </li>

       {% endfor %}
     </ul>
   </div>
 </div>
 <div class="row">
   <div class="[ col-xs-12 col-sm-offset-2 col-sm-8 ] text-center">
     <nav>
       <ul class="pagination">
         <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
         <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
         <li><a href="#">2</a></li>
         <li><a href="#">3</a></li>
         <li><a href="#">4</a></li>
         <li><a href="#">5</a></li>
         <li>
           <a href="#" aria-label="Next">
             <span aria-hidden="true">&raquo;</span>
           </a>
         </li>
       </ul>
     </nav>
   </div>
 </div>-->
{% endblock %}
